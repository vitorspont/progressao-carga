<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Progress√£o de Carga</title>
  <style>
    body { font-family: Arial; padding: 15px; }
    label { font-weight: bold; display: block; margin-top: 6px; }
    input, select, button {
      margin: 4px 0;
      width: 100%;
      padding: 6px;
      font-size: 14px;
    }
    .box {
      border: 1px solid #ccc;
      padding: 10px;
      margin-top: 12px;
      border-radius: 6px;
    }
    h4 { margin-bottom: 5px; }
    .res { font-weight: bold; margin-top: 8px; }
    .hist {
      font-size: 13px;
      color: #444;
      margin-top: 6px;
      background: #f7f7f7;
      padding: 6px;
      border-radius: 4px;
    }
  </style>
</head>
<body>

<h2>Progress√£o de Carga</h2>

<label for="treino">Treino do dia</label>
<select id="treino" onchange="carregar()">
  <option value="">Selecione o treino</option>
  <option>A</option><option>B</option><option>C</option>
  <option>D</option><option>E</option><option>F</option>
</select>

<div id="exercicios"></div>

<script>
const treinos = {
  A: [
    ["Supino inclinado",6,10,3],
    ["Desenvolvimento neutro",6,10,3],
    ["Crucifixo m√°quina",8,12,3],
    ["Eleva√ß√£o lateral",8,12,4],
    ["Tr√≠ceps unilateral",8,12,4],
    ["Rosca direta",8,12,3],
    ["Antebra√ßo",12,20,3]
  ],
  B: [
    ["Agachamento livre",6,10,2],
    ["Cadeira extensora",8,12,3],
    ["Cadeira flexora",8,12,4],
    ["Panturrilha",12,20,6],
    ["Abd√¥men",12,20,3]
  ],
  C: [
    ["Barra",6,10,3],
    ["Remada cavalinho",6,10,3],
    ["Rosca Scott",8,12,3],
    ["Paralelas",6,10,3],
    ["Eleva√ß√£o lateral",8,12,4],
    ["Antebra√ßo",12,20,3]
  ],
  D: [
    ["Terra",6,10,3],
    ["Leg 180",6,10,2],
    ["Extensora",8,12,4],
    ["Panturrilha",12,20,7],
    ["Abd√¥men",12,20,3]
  ],
  E: [
    ["Supino m√°quina",6,10,2],
    ["Remada cavalinho",6,10,2],
    ["Puxada aberta",6,10,3],
    ["Crucifixo inclinado",8,12,3],
    ["Eleva√ß√£o lateral",8,12,4],
    ["Overhead tr√≠ceps",8,12,4],
    ["Rosca direta",8,12,3],
    ["Antebra√ßo",12,20,3]
  ],
  F: [
    ["Stiff",6,10,3],
    ["Extensora",8,12,4],
    ["Panturrilha",12,20,7],
    ["Abd√¥men",12,20,3]
  ]
};

function getKey(nome) {
  return "hist_" + nome.replaceAll(" ","_");
}

function carregar() {
  const t = document.getElementById("treino").value;
  let html = "";

  treinos[t].forEach((e,i)=>{
    const hist = JSON.parse(localStorage.getItem(getKey(e[0])) || "null");
    const ultimaCarga = hist ? hist.carga : "";
    const ultimaDecisao = hist ? hist.decisao : null;

    html += `
    <div class="box">
      <h4>${e[0]} (${e[1]}‚Äì${e[2]} reps)</h4>

      <label>Carga utilizada (kg)</label>
      <input type="number" step="0.1" id="c${i}" value="${ultimaCarga}">

      ${[...Array(e[3])].map((_,s)=>`
        <label>Reps s√©rie ${s+1}</label>
        <input type="number" id="r${i}${s}">
      `).join("")}

      <label>RIR final</label>
      <input type="number" id="rir${i}">

      <button onclick="avaliar(${i},'${e[0]}',${e[1]},${e[2]},${e[3]})">
        Avaliar progress√£o
      </button>

      <div class="res" id="res${i}"></div>

      ${hist ? `
        <div class="hist">
          √öltima carga: <b>${hist.carga} kg</b><br>
          √öltima decis√£o: <b>${hist.decisao}</b><br>
          Data: ${hist.data}
        </div>
      ` : ""}
    </div>`;
  });

  document.getElementById("exercicios").innerHTML = html;
}

function avaliar(i,nome,min,max,s) {
  let reps=[];
  for(let x=0;x<s;x++) reps.push(Number(document.getElementById(`r${i}${x}`).value));
  let rir=Number(document.getElementById(`rir${i}`).value);
  let carga=Number(document.getElementById(`c${i}`).value);

  let decisao = `‚û° Manter ${carga} kg e buscar +1 rep`;

  if (Math.min(...reps)>=max && rir<=1) {
    let novaCarga = (carga * 1.02).toFixed(1);
    decisao = `üîº Aumentar carga ‚Üí ${novaCarga} kg (+2%)`;
  }

  if (Math.min(...reps)<min) {
    let novaCarga = (carga * 0.95).toFixed(1);
    decisao = `üîΩ Reduzir carga ‚Üí ${novaCarga} kg (‚àí5%)`;
  }

  localStorage.setItem(getKey(nome), JSON.stringify({
    carga: carga,
    decisao: decisao,
    data: new Date().toLocaleDateString()
  }));

  document.getElementById("res"+i).innerText = decisao;
}
</script>

</body>
</html>
